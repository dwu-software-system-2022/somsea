<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Neftify - NFT Marketplace Bootstrap 5 HTML Template</title>
    <meta name="description"
        content="Neftify is the complete UX & UI dashboard for NFT. Here included bids, collection, wallet, and all user setting pages including profile, application, activity, payment method, api, sign in & sign up etc.">


    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/static/images/favicon.png}">
    <link rel="stylesheet" th:href="@{/static/css/style.css}">
    <script type="text/Javascript">
    	function popup1() {
    		/* document.domain = "127.0.0.1";  *///document.domain 값이 팝업과 부모창 동일해야 합니다
    		window.open("/nfts/popup2", "popup1", "width = 500px height = 200px left = 0px top = 0px");
    	}
    	
    	function popup2() {
    		/* document.domain = "127.0.0.2"; */  //document.domain 값이 팝업과 부모창 동일해야 합니다
    		window.open("/nfts/popup2", "popup2", "width = 500px height = 200px left = 0px top = 0px");
    		window.close();
    		 /* alert("왜 안돼!!"); */
    	}
    </script>
</head>

<body class="@@dashboard">

    <div id="preloader"><i>.</i><i>.</i><i>.</i></div>

    <div id="main-wrapper" class="front">

        <div class="header landing">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="navigation">
                            <nav class="navbar navbar-expand-lg navbar-light">
                                <div class="brand-logo">
                                    <a href="/static">
                                        <img th:src="@{/static/images/logo.png}" alt="" class="logo-primary">
                                        <img th:src="@{/static/images/logow.png}" alt="" class="logo-white">
                                    </a>
                                </div>
                                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                    aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                    <ul class="navbar-nav me-auto">
                                        <li class="nav-item dropdown"><a class="nav-link" href="/index.html">Home</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" href="/explore.html">Explore</a></li>
                                        <li class="nav-item"><a class="nav-link" href="/item.html">Item</a></li>
                                        <li class="nav-item"><a class="nav-link" href="/collection.html">Collection</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" href="/profile.html">Profile</a></li>
                                        <li class="nav-item"><a class="nav-link" href="/upload.html">Upload</a></li>
                                        <li class="nav-item"><a class="nav-link" href="/dashboard.html">Dashboard</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="signin-btn d-flex align-items-center">
                                    <div class="dark-light-toggle theme-switch" onclick="themeToggle()">
                                        <span class="dark"><i class="ri-moon-line"></i></span>
                                        <span class="light"><i class="ri-sun-line"></i></span>
                                    </div>

                                    <a class="btn btn-primary" href="/connect.html">Connect</a>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-title">
            <div class="container">
                <div class="row align-items-center justify-content-between">
                    <div class="col-6">
                        <div class="page-title-content">
                            <h3>Nft Detail</h3>
                            <p class="mb-2">Somsea Nft detail page</p>
                        </div>
                    </div>
                    <!-- <div class="col-auto">
                        <div class="breadcrumbs"><a href="#">Home </a><span><i
                                    class="ri-arrow-right-s-line"></i></span><a href="#">Payments</a></div>
                    </div> -->
                </div>
            </div>
        </div>


        <div class="item-single section-padding">
            <div class="container">
                <div class="row">
                    <div class="col-xxl-12">
                        <div class="top-bid">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                     <img th:src="|${nft.imageUrl}|" class="img-fluid rounded" alt="...">
                                        <div class="card-body">
                                            <div class="row align-items-center">
                                                <div class="col">
                                                    <h4 class="text-sm mb-0"></i>Detail</h4>
                                                </div>
                                            </div>
                                            <hr class="my-3">
                                            <div class="row align-items-center">
                                                <div class="col">
                                                    <h6 class="text-sm mb-0"></i>token</h6>
                                                </div>
                                                <div class="col-auto"><span class="text-sm" th:text="${nft.token}"></span></div>
                                            </div>
                                            <hr class="my-3">
                                            <div class="row align-items-center">
                                                <div class="col">
                                                    <h6 class="text-sm mb-0">tokenStandard</h6>
                                                </div>
                                                <div class="col-auto"><span class="text-sm" th:text="${nft.tokenStandard}"></span></div>
                                            </div>
                                            <hr class="my-3">
                                            <div class="row align-items-center">
                                                <div class="col">
                                                    <h6 class="text-sm mb-0">blockChain</h6>
                                                </div>
                                                <div class="col-auto"><span class="text-sm"th:text="${nft.blockChain}"></span></div>
                                            </div>
                                            <hr class="my-3">
                                         </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h3 class="mb-3" th:text="${nft.title}">nft Title</h3>
                                        <div class="d-flex align-items-center mb-3"><img src="/static/images/avatar/1.jpg"
                                                alt="" class="me-3 avatar-img">
                                            <div class="flex-grow-1">
                                       
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-4 mb-4">
                                            <div class="text-start">
                                                <h4 class="mb-2">Auction ends</h4>
                                                <h5 class="text-muted" th:if="${auction}" th:text="${auction.dueDate}">dudDate</h5>
                                            </div>
                                            <div class="text-end">
                                                <h4 class="mb-2">Top Bid : <strong class="text-primary" th:if="${auction}" th:text="${auction.topBid}">topBid</strong></h4>
                                           
                                            </div>
                                        </div>
                                        <!-- <div class="d-flex"><a href="" class="btn btn-primary">Place a Bid</a></div> -->
                                        <div th:if="${auction.status.toString().equals('COMPLETED')} and ${userId} == ${topBid.user.id}">
                           
	                                        <!-- <form action="#"> -->
		                                        <label>
		                                        	<input type="button" value="buy now" onClick="popup1()">
		                                        </label>	
                                       		<!-- </form>  -->
                                       	</div>
                                       	<div th:unless="${auction.status.toString().equals('COMPLETED')} and ${userId} == ${topBid.user.id}">
                                       		 <!-- <form action="#" th:action="@{/nfts/{nftId}(nftId=${nft.nftId})}"> -->
		                                        <label th:if="${auction.status.toString().equals('COMPLETED')} and ${userId} != ${topBid.user.id}">
		                                        	<input type="button" value="Place a bid" disabled='disabled'>
		                                        </label>
		                                        <label th:unless="${auction.status.toString().equals('COMPLETED')} and ${userId} != ${topBid.user.id}">
		                                        	<input type="button" value="Place a bid" onClick="popup2()">
		                                        </label>	
                                       		<!-- </form> -->
                                       	</div>
                                       
                                    
                                        <h4 class="card-title mb-3">Offers</h4>
                                        <div id ="offers">
									      <table id="offersTable" style="width: 850px">
									      <tr>
									         <th>Price</th>
									         <th>Floor Difference</th>
									         <th>Expiration</th>
									         <th>From</th>
									         <th></th>
									      </tr>
                                    	 
         								  	<tr th:if="${bidding != null and !bidding.isEmpty()}" th:each="bid : ${bidding}">
         							
         								  		<td th:text="${bid.price}">bidPrice</td>
         								  		<td th:text="${bid.floorDifference}">floorDifference</td>
         								  		<td th:text="${bid.expiration}">expiration</td>
         								  		<td>
	         								  		<a href="#" th:href="@{/users/{userId}(userId=${bid.user.id})}" th:text="${bid.user.name}">
	         								  			userName
	         								  		</a>
	         								  	</td>
	         								  	<td th:if="${userId} == ${bid.user.id}"><a href="#" th:href="@{/nfts/bidding/delete}">X</a></td>
	         								  
         								  	</tr>
         								  	<tr th:unless="${bidding != null and !bidding.isEmpty()}">
            									<td colspan="6">입찰 정보가 없습니다.</td>
         									</tr>
         								  	
         								  </table>
         								  </div>
         								  <h4 class="card-title mb-3">Trade History</h4>
         								   <div id ="trade">
									      <table id="tradeTable" style="width: 850px">
									      <tr>
									         <th></th>
									         <th>Price</th>
									         <th>From</th>
									      </tr>
                                        				  
         								  <tr th:if="${tradeHistory != null and !tradeHistory.isEmpty()}" th:each="trade,index : ${tradeHistory}">
         							
         								  	<td th:text="${index.index} + 1">index</td>
         								  	<td th:text="${trade.amount}">tradePrice</td>
         								  	<td>  
	         								  	<a href="#" th:href="@{/users/{userId}/(userId=${trade.user.id})}" th:text="${trade.user.name}">
	         								  	userName
	         								  	</a>
	         								</td>
         								  </tr>
         								 	
         								 <tr th:unless="${tradeHistory != null and !tradeHistory.isEmpty()}">
            								<td colspan="6">입찰 기록이 없습니다.</td>
         								</tr>
         								  </table>
         								  </div>     
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <script src="/static/vendor/jquery/jquery.min.js"></script>
    <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/scripts.js"></script> 


</body>

</html>